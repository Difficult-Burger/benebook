+------------------+    +-------------------+    +------------------+
|    前端(浏览器)   |    |   后端(Node.js)   |    |     数据库(MySQL) |
+------------------+    +-------------------+    +------------------+
        |                        |                       |
        |  请求页面              |                       |
        | ---------------------->|                       |
        |                        |   查询数据            |
        |                        | --------------------->|
        |                        |   返回数据            |
        |                        |<---------------------|
        |  渲染页面(EJS)          |                       |
        |<-----------------------|                       |
        |                        |                       |
        |                        |                       |
        
+----------------------------------------------------------+
|                        主要业务流程                        |
+----------------------------------------------------------+

1. 用户注册/登录流程:
+-------------+     +------------+     +--------------+     +---------------+
| 输入手机号   | --> | 验证用户信息 | --> | 创建用户记录  | --> | 重定向到首页   |
+-------------+     +------------+     +--------------+     +---------------+

2. 书籍捐赠流程:
+-------------+     +------------+     +--------------+     +---------------+     +----------------+
| 填写书籍信息 | --> | 提交捐赠表单 | --> | 保存书籍信息  | --> | 记录捐赠信息   | --> | 更新用户积分    |
+-------------+     +------------+     +--------------+     +---------------+     +----------------+
                                                                  |
                                                                  V
                                                          +-----------------+
                                                          | 生成环保感谢信   |
                                                          +-----------------+

3. 积分兑换流程:
+-------------+     +------------+     +--------------+     +---------------+     +----------------+
| 浏览奖励商品 | --> | 选择兑换物品 | --> | 提交兑换请求  | --> | 验证积分余额   | --> | 记录兑换信息    |
+-------------+     +------------+     +--------------+     +---------------+     +----------------+
                                                                  |
                                                                  V
                                                          +-----------------+     +----------------+
                                                          | 扣减用户积分    | --> | 减少物品库存    |
                                                          +-----------------+     +----------------+

4. 数据流动:
+-------------+              +-------------------+                 +----------------+
| 前端页面     |              | 后端路由处理       |                 | 数据库操作      |
+-------------+              +-------------------+                 +----------------+
| index.ejs   | <-- 书籍数据 -- | routes/books.js  | <-- 查询书籍 --- | Book表         |
| book.ejs    |              |                   |                 |                |
+-------------+              +-------------------+                 +----------------+
| donors/*.ejs| <-- 用户数据 -- | routes/donors.js | <-- 查询用户 --- | Donor表        |
+-------------+              +-------------------+                 +----------------+
|donations/*.ejs|<-- 捐赠数据 - |routes/donations.js|<-- 查询捐赠 --- | Donation表     |
+-------------+              +-------------------+                 | ThankYouLetter表|
                                                                   +----------------+
| rewards/*.ejs |<-- 奖励数据 - | routes/rewards.js|<-- 查询奖励 --- | RewardItem表   |
+-------------+              +-------------------+                 +----------------+
|redemptions/*.ejs|<-兑换数据 - |routes/redemptions.js|<-查询兑换 --- | Redemption表   |
+-------------+              +-------------------+                 +----------------+

5. 环保数据计算流程:
+----------------+     +------------------+     +------------------+
| 书籍捐赠数量    | --> | 系统配置参数     | --> | 计算环保贡献数据  |
+----------------+     +------------------+     +------------------+
                          |                              |
                          V                              V
                     +------------+              +----------------+
                     | SystemConfig|             | 生成感谢信      |
                     +------------+              +----------------+